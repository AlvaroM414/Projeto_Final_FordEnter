<div class="controle-financas-container">
    <h2>Controle de Finanças</h2>
    
    <div class="controle-grid">
      <!-- Formulário de Nova Transação -->
      <div class="card nova-transacao">
        <h3>Nova Transação</h3>
        <form #transacaoForm="ngForm" class="form-transacao">
          <div class="form-group">
            <label for="descricao">Descrição</label>
            <input 
              type="text" 
              id="descricao" 
              name="descricao" 
              [(ngModel)]="novaTransacao.descricao"
              placeholder="Ex: Salário, Aluguel, Supermercado"
              required
              class="form-input">
          </div>
  
          <div class="form-row">
            <div class="form-group">
              <label for="valor">Valor (R$)</label>
              <input 
                type="number" 
                id="valor" 
                name="valor" 
                [(ngModel)]="novaTransacao.valor"
                placeholder="0,00"
                step="0.01"
                required
                class="form-input">
            </div>
  
            <div class="form-group">
              <label for="data">Data</label>
              <input 
                type="date" 
                id="data" 
                name="data" 
                [(ngModel)]="novaTransacao.data"
                required
                class="form-input">
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group">
              <label for="categoria">Categoria</label>
              <select 
                id="categoria" 
                name="categoria" 
                [(ngModel)]="novaTransacao.categoria"
                required
                class="form-select">
                <option value="">Selecione...</option>
                <option value="alimentacao">Alimentação</option>
                <option value="moradia">Moradia</option>
                <option value="transporte">Transporte</option>
                <option value="saude">Saúde</option>
                <option value="educacao">Educação</option>
                <option value="lazer">Lazer</option>
                <option value="salario">Salário</option>
                <option value="investimentos">Investimentos</option>
              </select>
            </div>
  
            <div class="form-group">
              <label for="tipo">Tipo</label>
              <select 
                id="tipo" 
                name="tipo" 
                [(ngModel)]="novaTransacao.tipo"
                required
                class="form-select">
                <option value="receita">Receita</option>
                <option value="despesa">Despesa</option>
              </select>
            </div>
          </div>
  
          <button 
            type="button" 
            (click)="adicionarTransacao()" 
            class="btn-adicionar"
            [disabled]="!transacaoForm.valid">
            Adicionar Transação
          </button>
        </form>
      </div>
  
      <!-- Lista de Transações -->
      <div class="card lista-transacoes">
        <h3>Últimas Transações</h3>
        
        <div class="filtros">
          <select [(ngModel)]="filtroCategoria" (change)="filtrarTransacoes()" class="filtro-select">
            <option value="">Todas as categorias</option>
            <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
          </select>
          
          <select [(ngModel)]="filtroMes" (change)="filtrarTransacoes()" class="filtro-select">
            <option value="">Todos os meses</option>
            <option *ngFor="let mes of meses" [value]="mes">{{ mes }}</option>
          </select>
        </div>
  
        <div class="transacoes-list">
          <div *ngFor="let transacao of transacoesFiltradas" 
               class="transacao-item"
               [class.receita]="transacao.tipo === 'receita'"
               [class.despesa]="transacao.tipo === 'despesa'">
            <div class="transacao-info">
              <span class="descricao">{{ transacao.descricao }}</span>
              <span class="categoria">{{ transacao.categoria }}</span>
              <span class="data">{{ transacao.data | date:'dd/MM/yyyy' }}</span>
            </div>
            <div class="transacao-valor">
              <span [class.valor-receita]="transacao.tipo === 'receita'"
                    [class.valor-despesa]="transacao.tipo === 'despesa'">
                {{ transacao.tipo === 'receita' ? '+' : '-' }} R$ {{ transacao.valor | number:'1.2-2' }}
              </span>
              <button (click)="removerTransacao(transacao.id)" class="btn-remover">×</button>
            </div>
          </div>
          
          <div *ngIf="transacoesFiltradas.length === 0" class="sem-transacoes">
            Nenhuma transação encontrada.
          </div>
        </div>
      </div>
  
      <!-- Resumo Financeiro -->
      <div class="card resumo-financeiro">
        <h3>Resumo do Mês</h3>
        <div class="resumo-item total-receitas">
          <span>Total Receitas:</span>
          <strong class="positivo">R$ {{ totalReceitas | number:'1.2-2' }}</strong>
        </div>
        <div class="resumo-item total-despesas">
          <span>Total Despesas:</span>
          <strong class="negativo">R$ {{ totalDespesas | number:'1.2-2' }}</strong>
        </div>
        <div class="resumo-item saldo">
          <span>Saldo:</span>
          <strong [class.positivo]="saldo >= 0" [class.negativo]="saldo < 0">
            R$ {{ saldo | number:'1.2-2' }}
          </strong>
        </div>
      </div>
    </div>
  </div>